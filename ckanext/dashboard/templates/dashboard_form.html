{% import 'macros/form.html' as form %}
{% resource 'dashboard-view/form' %}

<div class="dashboard-view-edit" data-module="dashboard-view-edit" data-module-size="{{h.dashboard_size()}}">
  <hr>
  <div class="btn-group">
    <a href="#" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
      {{ _('Add widget') }} <span class="caret"></span>
    </a>
    <ul id="dashboard-view-edit-new" class="dropdown-menu">
      {% for resource_name in available_views %}
        <li role="presentation" class="dropdown-header">{{ resource_name }}</li>
        {% for view in available_views[resource_name] %}
          <li>
            <a href="#" data-view_id="{{ view.id }}">
              <i class="icon-{{ view.icon }}"></i> {{ view.title }}
            </a>
          </li>
        {% endfor %}
      {% endfor %}
    </ul>
  </div>

  <div class="btn-group pull-right control-small">
    <input id="dashboard-view-add-url-input" class="input-button" name='added_view_id' value="" placeholder="URL of view">
    <a id="dashboard-view-add-url-button" href="#" class="btn btn-primary"> {{ _('Add widget from url') }} </a>
  </div>

  <input type="hidden" name="json" value="{{ data.get('json', []) }}">
</div>
